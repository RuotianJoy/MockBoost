# MockBoost 应用程序时序图

## 用户交互流程时序图

下面是MockBoost应用程序在面试场景中的主要交互时序图，展示了从用户开始面试到结束面试的完整流程。

```
+----------+     +-----------+    +------------+    +------------+    +-----------+    +---------------+    +---------+
| 用户      |     | MainWindow|    | ModelThread|    | DataThread |    | TTSThread |    | VoskRecognizer |    | 数据库  |
+----------+     +-----------+    +------------+    +------------+    +-----------+    +---------------+    +---------+
     |                 |                |                 |                |                  |                  |
     | 点击开始面试     |                |                 |                |                  |                  |
     |---------------->|                |                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |--初始化面试环境-->|                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |---开始语音识别----|                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |------------------------------------|-------------->|                  |                  |
     |                 |                |                 |                |     识别语音      |                  |
     | 说话(语音输入)   |                |                 |                |                  |                  |
     |---------------------------------------------------------->|                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |<-----------------------------------|--------------|                  |                  |
     |                 |   返回识别文本   |                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |---创建模型线程-->|                 |                |                  |                  |
     |                 |  (传递用户输入)  |                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |                |---创建数据线程--->|                |                  |                  |
     |                 |                | (传递用户输入和ID)|                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |                |                 |--检查对话历史----|------------------|----------------->|
     |                 |                |                 |                |                  |                  |
     |                 |                |                 |<--返回对话历史---|------------------|------------------|
     |                 |                |                 |                |                  |                  |
     |                 |                |                 |--生成模型回复----|                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |                |                 |--更新对话历史----|------------------|----------------->|
     |                 |                |                 |                |                  |                  |
     |                 |                |<--返回模型回复---|                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |<--返回模型回复---|                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |--更新界面显示--->|                 |                |                  |                  |
     |                 | (显示对话内容)   |                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |--创建TTS线程-----|-----------------|--------------->|                  |                  |
     |                 | (传递回复文本)   |                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |                |                 |                |--播放语音回复---->|                  |
     |                 |                |                 |                |                  |                  |
     | 聆听AI回复      |                |                 |                |                  |                  |
     |<-----------------------------------------------------------|                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |<--语音播放完成---|                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |--准备下一轮对话->|                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     | 点击结束面试     |                |                 |                |                  |                  |
     |---------------->|                |                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |--创建结束线程--->|                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |                 |----------------|-----------------|-----------------|-----------------|-生成面试报告----->|
     |                 |                |                 |                |                  |                  |
     |                 |<----------------|-----------------|-----------------|-----------------|-返回面试数据-----|
     |                 |                |                 |                |                  |                  |
     |                 |--显示面试总结--->|                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
     |<---面试结束------|                |                 |                |                  |                  |
     |                 |                |                 |                |                  |                  |
```

## 语音识别流程时序图

以下是语音识别过程的详细时序图：

```
+----------+     +-----------+    +-----------+    +---------------+
| 用户      |     | MainWindow|    | ASRThread |    | VoskRecognizer|
+----------+     +-----------+    +-----------+    +---------------+
     |                 |                |                 |
     |                 |--创建ASR线程--->|                 |
     |                 |                |                 |
     |                 |                |--初始化识别器--->|
     |                 |                |                 |
     |                 |                |<--返回识别器实例-|
     |                 |                |                 |
     |                 |                |--开始录音识别--->|
     |                 |                |                 |
     | 说话(语音输入)   |                |                 |
     |-------------------------------------------------->|
     |                 |                |                 |
     |                 |                |<--部分识别结果--|
     |                 |                |                 |
     |                 |<--更新部分结果--|                 |
     |                 |                |                 |
     |                 |--显示部分结果-->|                 |
     |                 |                |                 |
     | 停止说话        |                |                 |
     |-------------------------------------------------->|
     |                 |                |                 |
     |                 |                |<--最终识别结果--|
     |                 |                |                 |
     |                 |<--返回识别文本--|                 |
     |                 |                |                 |
```

## 语音合成流程时序图

以下是文本转语音过程的详细时序图：

```
+-----------+    +-----------+    +---------+
| MainWindow|    | TTSThread |    | ChatTTS |
+-----------+    +-----------+    +---------+
     |                 |               |
     |--创建TTS线程---->|               |
     | (传递回复文本)   |               |
     |                 |               |
     |                 |--初始化TTS引擎->|
     |                 |               |
     |                 |<-返回TTS实例---|
     |                 |               |
     |                 |--文本转语音--->|
     |                 |               |
     |                 |<--生成音频数据-|
     |                 |               |
     |                 |--播放音频数据->|
     |                 |               |
     |<--语音播放完成---|               |
     |                 |               |
```

## 数据库交互流程时序图

以下是应用程序与数据库交互的详细时序图：

```
+------------+     +----------------------+    +---------+    +-------+
| DataThread |     | UserServerController |    | CommonDb|    | Redis |
+------------+     +----------------------+    +---------+    +-------+
     |                         |                   |             |
     |--获取对话历史------------|-------------------|------------>|
     |                         |                   |             |
     |<--返回对话历史数据--------|-------------------|-------------|
     |                         |                   |             |
     |--创建新对话--------------->|                   |             |
     |                         |                   |             |
     |                         |--获取用户ID-------->|             |
     |                         |                   |             |
     |                         |<--返回用户ID--------|             |
     |                         |                   |             |
     |                         |--添加对话ID-------->|             |
     |                         |                   |             |
     |                         |<--确认添加成功------|             |
     |                         |                   |             |
     |<--返回新对话ID------------|                   |             |
     |                         |                   |             |
     |--更新对话历史------------|-------------------|------------>|
     |                         |                   |             |
     |<--确认更新成功------------|-------------------|-------------|
     |                         |                   |             |
```

## 面试结束流程时序图

以下是结束面试过程的详细时序图：

```
+----------+     +-----------+    +------------------+    +---------------+    +---------+
| 用户      |     | MainWindow|    | EndInterviewThread|   | DeepSeek模型   |    | 数据库  |
+----------+     +-----------+    +------------------+    +---------------+    +---------+
     |                 |                    |                     |                |
     | 点击结束面试     |                    |                     |                |
     |---------------->|                    |                     |                |
     |                 |                    |                     |                |
     |                 |--创建结束面试线程--->|                     |                |
     |                 |                    |                     |                |
     |                 |                    |--获取对话历史---------|--------------->|
     |                 |                    |                     |                |
     |                 |                    |<--返回完整对话历史----|----------------|
     |                 |                    |                     |                |
     |                 |                    |--请求生成面试总结---->|                |
     |                 |                    |                     |                |
     |                 |                    |<--返回面试总结和评价--|                |
     |                 |                    |                     |                |
     |                 |                    |--保存面试总结和评价--|--------------->|
     |                 |                    |                     |                |
     |                 |                    |<--确认数据保存成功---|----------------|
     |                 |                    |                     |                |
     |                 |<--返回面试总结------|                     |                |
     |                 |                    |                     |                |
     |                 |--显示面试总结----->|                     |                |
     |                 |  和评价            |                     |                |
     |                 |                    |                     |                |
     |<---结束面试------|                    |                     |                |
     |                 |                    |                     |                |
```

这些时序图展示了MockBoost应用程序各主要功能模块之间的交互流程，包括用户交互、语音识别、语音合成、数据库交互以及面试结束等关键流程，清晰地呈现了系统的运行机制。 